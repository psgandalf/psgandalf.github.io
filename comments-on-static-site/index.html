<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Comments on a static site</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/github.min.css" data-svelte="svelte-dd1lau"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Overpass" data-svelte="svelte-dd1lau"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono" data-svelte="svelte-dd1lau">

		

		<link rel="modulepreload" href="/./_app/start-2d77e112.js">
		<link rel="modulepreload" href="/./_app/chunks/vendor-9600a199.js">
		<link rel="modulepreload" href="/./_app/chunks/paths-45dac81d.js">
		<link rel="modulepreload" href="/./_app/pages/__layout.svelte-e742f59d.js">
		<link rel="modulepreload" href="/./_app/pages/[slug].svelte-768d002c.js">
		<link rel="stylesheet" href="/./_app/assets/start-0826e215.css">
		<link rel="stylesheet" href="/./_app/assets/pages/__layout.svelte-5b470c70.css">
		<link rel="stylesheet" href="/./_app/assets/pages/[slug].svelte-7f9e302b.css">

		<script type="module">
			import { start } from "/./_app/start-2d77e112.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":"/."},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/./_app/pages/__layout.svelte-e742f59d.js"),
						import("/./_app/pages/[slug].svelte-768d002c.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/comments-on-static-site",
						query: new URLSearchParams(""),
						params: {"slug":"comments-on-static-site"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">




<div class="g-app-wrapper svelte-11xjeh8"><div><nav class="svelte-lorm98"><a href="/" class="svelte-lorm98"><h3 class="home svelte-lorm98">HOME</h3></a>
    <a href="/about" class="svelte-lorm98"><h3 class="about svelte-lorm98">about</h3></a></nav>
</div>
  

<div><h1 class="title svelte-3xaql2">Comments on a static site</h1>
  <p class="info"><a href="https://github.com/psgandalf">Micke</a> MAY 30, 2021</p>
  <p>With a static page blog you have to select a solution to add comments. Doing some investigations pointed to <a href="https://utteranc.es/">utterances</a>. The setup looked slim. Just put this in your code:</p>
<pre><code class="hljs language-js">&#x3C;script src=<span class="hljs-string">"https://utteranc.es/client.js"</span> 
        repo=<span class="hljs-string">"githubname/repo"</span>
        issue-term=<span class="hljs-string">"pathname"</span>
        label=<span class="hljs-string">"Comments"</span>
        theme=<span class="hljs-string">"github-light"</span>
        crossorigin=<span class="hljs-string">"anonymous"</span>
        <span class="hljs-keyword">async</span>>
&#x3C;/script>
</code></pre>
<p>Where repo should just be githubname/repo, not <a href="https://github.xxxxxx/xxxxxx">https://github.xxxxxx/xxxxxx</a>. Should ypu choose to use label as I did you have to add it to your issue labels if it doesn't exist.</p>
<h2>"message": "No commit found for the ref master" utterances.</h2>
<p>This was the error meddage I found with dev tools when trying to submit a message from the blog. With new repositories having no master bu instead a main branch since a while I just added a branch called master and that error message disappeared.</p>
<h2>"message":"At least one email address must be verified to do that</h2>
<p>This was the next error message that I got. I looked at utteran.es issus and did not find any. Doublechecked that my github account had a verified email address. With that checked I thought that there probably was something with the utterances-bot that maybe had a non verified address or that i maybe was removed or something. Today I was ready to submit a issue but then I found a new issue with the same error. I did a reply that I had the same error and that it might be the bots email. There where a reply in the issue pointing out that if you manually create the issue in the repo it works. This was a good workaround so now I could go with utterances!</p>
<h2>Adding some additional security.</h2>
<p>The setup doesn't check from where the messager origins. If a site is forked or if someone is just doing it for fun messages could be send from anywhere. Looking around i found <a href="https://github.com/utterance/utterances/issues/108">this post</a>. Just adding the file utterances.json to your root in the repository with this:</p>
<pre><code class="hljs language-js">{
  <span class="hljs-string">"origins"</span>: [<span class="hljs-string">"https://yoursite/"</span>]
}
</code></pre>
  <br>
  <br>
  <hr>
  <p>Comments</p>
  <script src="https://utteranc.es/client.js" repo="psgandalf/comments" issue-term="pathname" label="Comments" theme="github-light" crossorigin="anonymous" async></script>
</div>
</div>



	<script type="svelte-data" url="/comments-on-static-site.json">{"status":200,"statusText":"","headers":{"content-type":"text/plain;charset=UTF-8"},"body":"{\"metadata\":{\"title\":\"Comments on a static site\",\"date\":\"May 30, 2021\",\"excerpt\":\"With a static page blog you have to select a solution to att comments. Doing some investigations pointed to....\"},\"content\":\"\u003Cp\u003EWith a static page blog you have to select a solution to add comments. Doing some investigations pointed to \u003Ca href=\\\"https:\u002F\u002Futteranc.es\u002F\\\"\u003Eutterances\u003C\u002Fa\u003E. The setup looked slim. Just put this in your code:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"hljs language-js\\\"\u003E&#x3C;script src=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"https:\u002F\u002Futteranc.es\u002Fclient.js\\\"\u003C\u002Fspan\u003E \\n        repo=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"githubname\u002Frepo\\\"\u003C\u002Fspan\u003E\\n        issue-term=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"pathname\\\"\u003C\u002Fspan\u003E\\n        label=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"Comments\\\"\u003C\u002Fspan\u003E\\n        theme=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"github-light\\\"\u003C\u002Fspan\u003E\\n        crossorigin=\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"anonymous\\\"\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Easync\u003C\u002Fspan\u003E\u003E\\n&#x3C;\u002Fscript\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EWhere repo should just be githubname\u002Frepo, not \u003Ca href=\\\"https:\u002F\u002Fgithub.xxxxxx\u002Fxxxxxx\\\"\u003Ehttps:\u002F\u002Fgithub.xxxxxx\u002Fxxxxxx\u003C\u002Fa\u003E. Should ypu choose to use label as I did you have to add it to your issue labels if it doesn't exist.\u003C\u002Fp\u003E\\n\u003Ch2\u003E\\\"message\\\": \\\"No commit found for the ref master\\\" utterances.\u003C\u002Fh2\u003E\\n\u003Cp\u003EThis was the error meddage I found with dev tools when trying to submit a message from the blog. With new repositories having no master bu instead a main branch since a while I just added a branch called master and that error message disappeared.\u003C\u002Fp\u003E\\n\u003Ch2\u003E\\\"message\\\":\\\"At least one email address must be verified to do that\u003C\u002Fh2\u003E\\n\u003Cp\u003EThis was the next error message that I got. I looked at utteran.es issus and did not find any. Doublechecked that my github account had a verified email address. With that checked I thought that there probably was something with the utterances-bot that maybe had a non verified address or that i maybe was removed or something. Today I was ready to submit a issue but then I found a new issue with the same error. I did a reply that I had the same error and that it might be the bots email. There where a reply in the issue pointing out that if you manually create the issue in the repo it works. This was a good workaround so now I could go with utterances!\u003C\u002Fp\u003E\\n\u003Ch2\u003EAdding some additional security.\u003C\u002Fh2\u003E\\n\u003Cp\u003EThe setup doesn't check from where the messager origins. If a site is forked or if someone is just doing it for fun messages could be send from anywhere. Looking around i found \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Futterance\u002Futterances\u002Fissues\u002F108\\\"\u003Ethis post\u003C\u002Fa\u003E. Just adding the file utterances.json to your root in the repository with this:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"hljs language-js\\\"\u003E{\\n  \u003Cspan class=\\\"hljs-string\\\"\u003E\\\"origins\\\"\u003C\u002Fspan\u003E: [\u003Cspan class=\\\"hljs-string\\\"\u003E\\\"https:\u002F\u002Fyoursite\u002F\\\"\u003C\u002Fspan\u003E]\\n}\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\"}"}</script>
</div>
	</body>
</html>
